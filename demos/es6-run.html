<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>ES6-RUN</title>
    <link rel="stylesheet" href="//cdn.bootcss.com/codemirror/5.4.0/codemirror.min.css" type="text/css">
    <script src="//cdn.bootcss.com/babel-core/5.6.15/browser.min.js"></script>
    <script src="//cdn.bootcss.com/babel-core/5.6.15/browser-polyfill.min.js"></script>
    <script src="//cdn.bootcss.com/codemirror/5.4.0/codemirror.js"></script>
    <script src="//cdn.bootcss.com/codemirror/5.4.0/mode/javascript/javascript.js"></script>
  </head>
  <body>
    <textarea id="code" style="width:100%"> </textarea>
    <script type="text/javascript" charset="utf-8">
      var codeEl = document.getElementById('code')
      codeEl.style.cssText = 'height:' + document.documentElement.clientHeight +'px;width:100%;'

      var timer
      var delay = 1500

      var myCodeMirror = CodeMirror.fromTextArea(codeEl)
      myCodeMirror.on('change', function(){
        timer && clearTimeout(timer)
        timer = setTimeout(function(){
          babel.run(myCodeMirror.getValue(), {})
        }, delay)
      })
      myCodeMirror.focus()
    </script>
  </body>
</html>
